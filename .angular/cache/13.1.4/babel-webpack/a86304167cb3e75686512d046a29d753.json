{"ast":null,"code":"import _classCallCheck from \"D:\\\\poolcarz-angular-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"D:\\\\poolcarz-angular-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nexport var RideDetailsComponent = /*#__PURE__*/function () {\n  function RideDetailsComponent() {\n    _classCallCheck(this, RideDetailsComponent);\n\n    this.onBookRide = new EventEmitter();\n    this.bookButtonText = 'Book!';\n    this.cancelled = 0;\n    this.isError = 0;\n  }\n\n  _createClass(RideDetailsComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {}\n  }, {\n    key: \"bookRideStart\",\n    value: function bookRideStart(rideId) {\n      if (rideId) {\n        var status = '';\n        var rides = JSON.parse(localStorage.getItem('rides'));\n        var selectedRide = rides.filter(function (item) {\n          return item.id === rideId;\n        })[0];\n\n        if (this.cancelled === 0 && selectedRide.bookedBy !== sessionStorage.getItem('username') && selectedRide.seatsLeft !== 0) {\n          /* Do booking */\n          this.bookButtonText = 'Cancel Booked Ride';\n          this.makeCancelButton = true;\n          this.bookStatus = 'Booking done. Your booking id: 100';\n          status = 'booked';\n          this.cancelled = 1;\n          this.isError = 0;\n        } else if (selectedRide.bookedBy === sessionStorage.getItem('username')) {\n          /* Don't do booking : Same user */\n          this.bookButtonText = 'Book!';\n          this.makeCancelButton = false;\n          this.bookStatus = 'Cannot Book your own ride';\n          status = 'not_booked_sameuser';\n          this.cancelled = 0;\n          this.isError = 1;\n        } else if (selectedRide.seatsLeft === 0) {\n          /* Don't do booking : Seats left */\n          this.bookButtonText = 'Book!';\n          this.makeCancelButton = false;\n          this.bookStatus = 'No seats left, Please find another ride';\n          status = 'not_booked_noseatsleft';\n          this.cancelled = 0;\n          this.isError = 1;\n        } else {\n          /* Cancel booking */\n          this.bookButtonText = 'Book!';\n          this.makeCancelButton = false;\n          this.bookStatus = '';\n          status = 'cancelled';\n          this.cancelled = 0;\n          this.isError = 0;\n        }\n\n        var statusObjToParent = {\n          rideId: rideId,\n          status: status\n        };\n        this.onBookRide.emit(statusObjToParent);\n      }\n    }\n  }]);\n\n  return RideDetailsComponent;\n}();\n\nRideDetailsComponent.ɵfac = function RideDetailsComponent_Factory(t) {\n  return new (t || RideDetailsComponent)();\n};\n\nRideDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RideDetailsComponent,\n  selectors: [[\"app-ride-details\"]],\n  inputs: {\n    selectedRide: \"selectedRide\"\n  },\n  outputs: {\n    onBookRide: \"onBookRide\"\n  },\n  decls: 24,\n  vars: 0,\n  consts: [[1, \"row\"], [1, \"col-xs-12\"], [1, \"panel\", \"panel-primary\"], [1, \"panel-heading\"], [1, \"panel-body\"], [1, \"row\", \"margin-top-10\"], [1, \"col-xs-12\", \"text-center\"], [1, \"table\", \"table-bordered\"]],\n  template: function RideDetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵtext(4, \"Ride Details\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 4);\n      i0.ɵɵelementStart(6, \"div\", 5);\n      i0.ɵɵelementStart(7, \"div\", 6);\n      i0.ɵɵelementStart(8, \"table\", 7);\n      i0.ɵɵelementStart(9, \"thead\");\n      i0.ɵɵelementStart(10, \"tr\");\n      i0.ɵɵelementStart(11, \"th\");\n      i0.ɵɵtext(12, \"Id\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"th\");\n      i0.ɵɵtext(14, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Car\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\");\n      i0.ɵɵtext(18, \"Seats Left\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"th\");\n      i0.ɵɵtext(20, \"Pick-up Point\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"th\");\n      i0.ɵɵtext(22, \"Destination\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"tbody\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyaWRlLWRldGFpbHMuY29tcG9uZW50LmNzcyJ9 */\"],\n  encapsulation: 2\n});","map":{"version":3,"sources":["D:/poolcarz-angular-app/src/app/ride-details/ride-details.component.ts"],"names":["EventEmitter","i0","RideDetailsComponent","onBookRide","bookButtonText","cancelled","isError","rideId","status","rides","JSON","parse","localStorage","getItem","selectedRide","filter","item","id","bookedBy","sessionStorage","seatsLeft","makeCancelButton","bookStatus","statusObjToParent","emit","ɵfac","RideDetailsComponent_Factory","t","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","outputs","decls","vars","consts","template","RideDetailsComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","styles","encapsulation"],"mappings":";;AAAA,SAASA,YAAT,QAA6B,eAA7B;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,WAAaC,oBAAb;AACI,kCAAc;AAAA;;AACV,SAAKC,UAAL,GAAkB,IAAIH,YAAJ,EAAlB;AACA,SAAKI,cAAL,GAAsB,OAAtB;AACA,SAAKC,SAAL,GAAiB,CAAjB;AACA,SAAKC,OAAL,GAAe,CAAf;AACH;;AANL;AAAA;AAAA,WAOI,oBAAW,CAAG;AAPlB;AAAA;AAAA,WAQI,uBAAcC,MAAd,EAAsB;AAClB,UAAIA,MAAJ,EAAY;AACR,YAAIC,MAAM,GAAG,EAAb;AACA,YAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAd;AACA,YAAMC,YAAY,GAAGL,KAAK,CAACM,MAAN,CAAa,UAAAC,IAAI;AAAA,iBAAIA,IAAI,CAACC,EAAL,KAAYV,MAAhB;AAAA,SAAjB,EAAyC,CAAzC,CAArB;;AACA,YAAI,KAAKF,SAAL,KAAmB,CAAnB,IACAS,YAAY,CAACI,QAAb,KAA0BC,cAAc,CAACN,OAAf,CAAuB,UAAvB,CAD1B,IAEAC,YAAY,CAACM,SAAb,KAA2B,CAF/B,EAEkC;AAAE;AAChC,eAAKhB,cAAL,GAAsB,oBAAtB;AACA,eAAKiB,gBAAL,GAAwB,IAAxB;AACA,eAAKC,UAAL,GAAkB,oCAAlB;AACAd,UAAAA,MAAM,GAAG,QAAT;AACA,eAAKH,SAAL,GAAiB,CAAjB;AACA,eAAKC,OAAL,GAAe,CAAf;AACH,SATD,MAUK,IAAIQ,YAAY,CAACI,QAAb,KAA0BC,cAAc,CAACN,OAAf,CAAuB,UAAvB,CAA9B,EAAkE;AAAE;AACrE,eAAKT,cAAL,GAAsB,OAAtB;AACA,eAAKiB,gBAAL,GAAwB,KAAxB;AACA,eAAKC,UAAL,GAAkB,2BAAlB;AACAd,UAAAA,MAAM,GAAG,qBAAT;AACA,eAAKH,SAAL,GAAiB,CAAjB;AACA,eAAKC,OAAL,GAAe,CAAf;AACH,SAPI,MAQA,IAAIQ,YAAY,CAACM,SAAb,KAA2B,CAA/B,EAAkC;AAAE;AACrC,eAAKhB,cAAL,GAAsB,OAAtB;AACA,eAAKiB,gBAAL,GAAwB,KAAxB;AACA,eAAKC,UAAL,GAAkB,yCAAlB;AACAd,UAAAA,MAAM,GAAG,wBAAT;AACA,eAAKH,SAAL,GAAiB,CAAjB;AACA,eAAKC,OAAL,GAAe,CAAf;AACH,SAPI,MAQA;AAAE;AACH,eAAKF,cAAL,GAAsB,OAAtB;AACA,eAAKiB,gBAAL,GAAwB,KAAxB;AACA,eAAKC,UAAL,GAAkB,EAAlB;AACAd,UAAAA,MAAM,GAAG,WAAT;AACA,eAAKH,SAAL,GAAiB,CAAjB;AACA,eAAKC,OAAL,GAAe,CAAf;AACH;;AACD,YAAMiB,iBAAiB,GAAG;AAAEhB,UAAAA,MAAM,EAAEA,MAAV;AAAkBC,UAAAA,MAAM,EAAEA;AAA1B,SAA1B;AACA,aAAKL,UAAL,CAAgBqB,IAAhB,CAAqBD,iBAArB;AACH;AACJ;AAlDL;;AAAA;AAAA;;AAoDArB,oBAAoB,CAACuB,IAArB,GAA4B,SAASC,4BAAT,CAAsCC,CAAtC,EAAyC;AAAE,SAAO,KAAKA,CAAC,IAAIzB,oBAAV,GAAP;AAA2C,CAAlH;;AACAA,oBAAoB,CAAC0B,IAArB,GAA4B,aAAc3B,EAAE,CAAC4B,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAE5B,oBAAR;AAA8B6B,EAAAA,SAAS,EAAE,CAAC,CAAC,kBAAD,CAAD,CAAzC;AAAiEC,EAAAA,MAAM,EAAE;AAAElB,IAAAA,YAAY,EAAE;AAAhB,GAAzE;AAA2GmB,EAAAA,OAAO,EAAE;AAAE9B,IAAAA,UAAU,EAAE;AAAd,GAApH;AAAkJ+B,EAAAA,KAAK,EAAE,EAAzJ;AAA6JC,EAAAA,IAAI,EAAE,CAAnK;AAAsKC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,KAAJ,CAAD,EAAa,CAAC,CAAD,EAAI,WAAJ,CAAb,EAA+B,CAAC,CAAD,EAAI,OAAJ,EAAa,eAAb,CAA/B,EAA8D,CAAC,CAAD,EAAI,eAAJ,CAA9D,EAAoF,CAAC,CAAD,EAAI,YAAJ,CAApF,EAAuG,CAAC,CAAD,EAAI,KAAJ,EAAW,eAAX,CAAvG,EAAoI,CAAC,CAAD,EAAI,WAAJ,EAAiB,aAAjB,CAApI,EAAqK,CAAC,CAAD,EAAI,OAAJ,EAAa,gBAAb,CAArK,CAA9K;AAAoXC,EAAAA,QAAQ,EAAE,SAASC,6BAAT,CAAuCC,EAAvC,EAA2CC,GAA3C,EAAgD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACnftC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAxC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAxC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAxC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAxC,MAAAA,EAAE,CAACyC,MAAH,CAAU,CAAV,EAAa,cAAb;AACAzC,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAACwC,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAxC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAxC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAxC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,CAAlB,EAAqB,OAArB,EAA8B,CAA9B;AACAxC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,CAAlB,EAAqB,OAArB;AACAxC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAxC,MAAAA,EAAE,CAACwC,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAxC,MAAAA,EAAE,CAACyC,MAAH,CAAU,EAAV,EAAc,IAAd;AACAzC,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAACwC,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAxC,MAAAA,EAAE,CAACyC,MAAH,CAAU,EAAV,EAAc,MAAd;AACAzC,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAACwC,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAxC,MAAAA,EAAE,CAACyC,MAAH,CAAU,EAAV,EAAc,KAAd;AACAzC,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAACwC,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAxC,MAAAA,EAAE,CAACyC,MAAH,CAAU,EAAV,EAAc,YAAd;AACAzC,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAACwC,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAxC,MAAAA,EAAE,CAACyC,MAAH,CAAU,EAAV,EAAc,eAAd;AACAzC,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAACwC,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAxC,MAAAA,EAAE,CAACyC,MAAH,CAAU,EAAV,EAAc,aAAd;AACAzC,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAAC2C,SAAH,CAAa,EAAb,EAAiB,OAAjB;AACA3C,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAAC0C,YAAH;AACA1C,MAAAA,EAAE,CAAC0C,YAAH;AACH;AAAE,GAzCwD;AAyCtDE,EAAAA,MAAM,EAAE,CAAC,6KAAD,CAzC8C;AAyCmIC,EAAAA,aAAa,EAAE;AAzClJ,CAArB,CAA1C","sourcesContent":["import { EventEmitter } from '@angular/core';\r\nimport * as i0 from \"@angular/core\";\r\nexport class RideDetailsComponent {\r\n    constructor() {\r\n        this.onBookRide = new EventEmitter();\r\n        this.bookButtonText = 'Book!';\r\n        this.cancelled = 0;\r\n        this.isError = 0;\r\n    }\r\n    ngOnInit() { }\r\n    bookRideStart(rideId) {\r\n        if (rideId) {\r\n            let status = '';\r\n            const rides = JSON.parse(localStorage.getItem('rides'));\r\n            const selectedRide = rides.filter(item => item.id === rideId)[0];\r\n            if (this.cancelled === 0 &&\r\n                selectedRide.bookedBy !== sessionStorage.getItem('username') &&\r\n                selectedRide.seatsLeft !== 0) { /* Do booking */\r\n                this.bookButtonText = 'Cancel Booked Ride';\r\n                this.makeCancelButton = true;\r\n                this.bookStatus = 'Booking done. Your booking id: 100';\r\n                status = 'booked';\r\n                this.cancelled = 1;\r\n                this.isError = 0;\r\n            }\r\n            else if (selectedRide.bookedBy === sessionStorage.getItem('username')) { /* Don't do booking : Same user */\r\n                this.bookButtonText = 'Book!';\r\n                this.makeCancelButton = false;\r\n                this.bookStatus = 'Cannot Book your own ride';\r\n                status = 'not_booked_sameuser';\r\n                this.cancelled = 0;\r\n                this.isError = 1;\r\n            }\r\n            else if (selectedRide.seatsLeft === 0) { /* Don't do booking : Seats left */\r\n                this.bookButtonText = 'Book!';\r\n                this.makeCancelButton = false;\r\n                this.bookStatus = 'No seats left, Please find another ride';\r\n                status = 'not_booked_noseatsleft';\r\n                this.cancelled = 0;\r\n                this.isError = 1;\r\n            }\r\n            else { /* Cancel booking */\r\n                this.bookButtonText = 'Book!';\r\n                this.makeCancelButton = false;\r\n                this.bookStatus = '';\r\n                status = 'cancelled';\r\n                this.cancelled = 0;\r\n                this.isError = 0;\r\n            }\r\n            const statusObjToParent = { rideId: rideId, status: status };\r\n            this.onBookRide.emit(statusObjToParent);\r\n        }\r\n    }\r\n}\r\nRideDetailsComponent.ɵfac = function RideDetailsComponent_Factory(t) { return new (t || RideDetailsComponent)(); };\r\nRideDetailsComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: RideDetailsComponent, selectors: [[\"app-ride-details\"]], inputs: { selectedRide: \"selectedRide\" }, outputs: { onBookRide: \"onBookRide\" }, decls: 24, vars: 0, consts: [[1, \"row\"], [1, \"col-xs-12\"], [1, \"panel\", \"panel-primary\"], [1, \"panel-heading\"], [1, \"panel-body\"], [1, \"row\", \"margin-top-10\"], [1, \"col-xs-12\", \"text-center\"], [1, \"table\", \"table-bordered\"]], template: function RideDetailsComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵelementStart(3, \"div\", 3);\r\n        i0.ɵɵtext(4, \"Ride Details\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"div\", 4);\r\n        i0.ɵɵelementStart(6, \"div\", 5);\r\n        i0.ɵɵelementStart(7, \"div\", 6);\r\n        i0.ɵɵelementStart(8, \"table\", 7);\r\n        i0.ɵɵelementStart(9, \"thead\");\r\n        i0.ɵɵelementStart(10, \"tr\");\r\n        i0.ɵɵelementStart(11, \"th\");\r\n        i0.ɵɵtext(12, \"Id\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"th\");\r\n        i0.ɵɵtext(14, \"Name\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(15, \"th\");\r\n        i0.ɵɵtext(16, \"Car\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(17, \"th\");\r\n        i0.ɵɵtext(18, \"Seats Left\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(19, \"th\");\r\n        i0.ɵɵtext(20, \"Pick-up Point\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(21, \"th\");\r\n        i0.ɵɵtext(22, \"Destination\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(23, \"tbody\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } }, styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyaWRlLWRldGFpbHMuY29tcG9uZW50LmNzcyJ9 */\"], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}