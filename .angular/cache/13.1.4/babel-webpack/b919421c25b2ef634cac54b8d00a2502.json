{"ast":null,"code":"import _classCallCheck from \"D:\\\\poolcarz-angular-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"D:\\\\poolcarz-angular-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nimport { Component, ViewEncapsulation, Input, Output, EventEmitter } from '@angular/core';\n\nvar RideDetailsComponent = /*#__PURE__*/function () {\n  function RideDetailsComponent() {\n    _classCallCheck(this, RideDetailsComponent);\n\n    this.onBookRide = new EventEmitter();\n    this.bookButtonText = 'Book!';\n    this.cancelled = 0;\n    this.isError = 0;\n  }\n\n  _createClass(RideDetailsComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {}\n  }, {\n    key: \"bookRideStart\",\n    value: function bookRideStart(rideId) {\n      if (rideId) {\n        var status = '';\n        var rides = JSON.parse(localStorage.getItem('rides'));\n        var selectedRide = rides.filter(function (item) {\n          return item.id === rideId;\n        })[0];\n\n        if (this.cancelled === 0 && selectedRide.bookedBy !== sessionStorage.getItem('username') && selectedRide.seatsLeft !== 0) {\n          /* Do booking */\n          this.bookButtonText = 'Cancel Booked Ride';\n          this.makeCancelButton = true;\n          this.bookStatus = 'Booking done. Your booking id: 100';\n          status = 'booked';\n          this.cancelled = 1;\n          this.isError = 0;\n        } else if (selectedRide.bookedBy === sessionStorage.getItem('username')) {\n          /* Don't do booking : Same user */\n          this.bookButtonText = 'Book!';\n          this.makeCancelButton = false;\n          this.bookStatus = 'Cannot Book your own ride';\n          status = 'not_booked_sameuser';\n          this.cancelled = 0;\n          this.isError = 1;\n        } else if (selectedRide.seatsLeft === 0) {\n          /* Don't do booking : Seats left */\n          this.bookButtonText = 'Book!';\n          this.makeCancelButton = false;\n          this.bookStatus = 'No seats left, Please find another ride';\n          status = 'not_booked_noseatsleft';\n          this.cancelled = 0;\n          this.isError = 1;\n        } else {\n          /* Cancel booking */\n          this.bookButtonText = 'Book!';\n          this.makeCancelButton = false;\n          this.bookStatus = '';\n          status = 'cancelled';\n          this.cancelled = 0;\n          this.isError = 0;\n        }\n\n        var statusObjToParent = {\n          rideId: rideId,\n          status: status\n        };\n        this.onBookRide.emit(statusObjToParent);\n      }\n    }\n  }]);\n\n  return RideDetailsComponent;\n}();\n\n__decorate([Input(), __metadata(\"design:type\", Object)], RideDetailsComponent.prototype, \"selectedRide\", void 0);\n\n__decorate([Output(), __metadata(\"design:type\", Object)], RideDetailsComponent.prototype, \"onBookRide\", void 0);\n\nRideDetailsComponent = __decorate([Component({\n  selector: 'app-ride-details',\n  templateUrl: './ride-details.component.html',\n  styleUrls: ['./ride-details.component.css'],\n  encapsulation: ViewEncapsulation.None\n}), __metadata(\"design:paramtypes\", [])], RideDetailsComponent);\nexport { RideDetailsComponent };","map":{"version":3,"sources":["D:/poolcarz-angular-app/src/app/ride-details/ride-details.component.ts"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","Component","ViewEncapsulation","Input","Output","EventEmitter","RideDetailsComponent","onBookRide","bookButtonText","cancelled","isError","rideId","status","rides","JSON","parse","localStorage","getItem","selectedRide","filter","item","id","bookedBy","sessionStorage","seatsLeft","makeCancelButton","bookStatus","statusObjToParent","emit","prototype","selector","templateUrl","styleUrls","encapsulation","None"],"mappings":"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","sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nimport { Component, ViewEncapsulation, Input, Output, EventEmitter } from '@angular/core';\r\nlet RideDetailsComponent = class RideDetailsComponent {\r\n    constructor() {\r\n        this.onBookRide = new EventEmitter();\r\n        this.bookButtonText = 'Book!';\r\n        this.cancelled = 0;\r\n        this.isError = 0;\r\n    }\r\n    ngOnInit() { }\r\n    bookRideStart(rideId) {\r\n        if (rideId) {\r\n            let status = '';\r\n            const rides = JSON.parse(localStorage.getItem('rides'));\r\n            const selectedRide = rides.filter(item => item.id === rideId)[0];\r\n            if (this.cancelled === 0 &&\r\n                selectedRide.bookedBy !== sessionStorage.getItem('username') &&\r\n                selectedRide.seatsLeft !== 0) { /* Do booking */\r\n                this.bookButtonText = 'Cancel Booked Ride';\r\n                this.makeCancelButton = true;\r\n                this.bookStatus = 'Booking done. Your booking id: 100';\r\n                status = 'booked';\r\n                this.cancelled = 1;\r\n                this.isError = 0;\r\n            }\r\n            else if (selectedRide.bookedBy === sessionStorage.getItem('username')) { /* Don't do booking : Same user */\r\n                this.bookButtonText = 'Book!';\r\n                this.makeCancelButton = false;\r\n                this.bookStatus = 'Cannot Book your own ride';\r\n                status = 'not_booked_sameuser';\r\n                this.cancelled = 0;\r\n                this.isError = 1;\r\n            }\r\n            else if (selectedRide.seatsLeft === 0) { /* Don't do booking : Seats left */\r\n                this.bookButtonText = 'Book!';\r\n                this.makeCancelButton = false;\r\n                this.bookStatus = 'No seats left, Please find another ride';\r\n                status = 'not_booked_noseatsleft';\r\n                this.cancelled = 0;\r\n                this.isError = 1;\r\n            }\r\n            else { /* Cancel booking */\r\n                this.bookButtonText = 'Book!';\r\n                this.makeCancelButton = false;\r\n                this.bookStatus = '';\r\n                status = 'cancelled';\r\n                this.cancelled = 0;\r\n                this.isError = 0;\r\n            }\r\n            const statusObjToParent = { rideId: rideId, status: status };\r\n            this.onBookRide.emit(statusObjToParent);\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], RideDetailsComponent.prototype, \"selectedRide\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], RideDetailsComponent.prototype, \"onBookRide\", void 0);\r\nRideDetailsComponent = __decorate([\r\n    Component({\r\n        selector: 'app-ride-details',\r\n        templateUrl: './ride-details.component.html',\r\n        styleUrls: ['./ride-details.component.css'],\r\n        encapsulation: ViewEncapsulation.None\r\n    }),\r\n    __metadata(\"design:paramtypes\", [])\r\n], RideDetailsComponent);\r\nexport { RideDetailsComponent };\r\n"]},"metadata":{},"sourceType":"module"}